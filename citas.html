<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agendar Cita - PetCare</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
    <style>
      body {
        background: url("https://images.unsplash.com/photo-1560807707-8cc77767d783")
          no-repeat center center fixed;
        background-size: cover;
      }
      .form-container {
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 10px;
        max-width: 500px;
        margin: 0 auto;
      }
      .container {
        align-items: center;
      }
      /* Estilos para el modal de resumen */
      .modal-header {
        background-color: #007bff;
        color: white;
      }
      .modal-content {
        border-radius: 10px;
      }
      .modal-body {
        background-color: #f8f9fa;
      }
      .modal-footer {
        background-color: #f8f9fa;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <i class="fas fa-paw"></i> PetCare
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="#">Agendar Cita</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <section class="container mt-5 pt-5">
      <div class="form-container">
        <h2 class="text-center mb-4">Agendar una Cita</h2>
        <form id="citaForm" novalidate>
          <!-- Servicio -->
          <div class="mb-3">
            <label for="servicio" class="form-label">Servicio</label>
            <select class="form-control" id="servicio" required>
              <option value="">Seleccione un servicio</option>
              <option value="guardería">Guardería</option>
              <option value="desparasitación">Desparasitación</option>
              <option value="laboratorio">Laboratorio</option>
              <option value="vacunación">Vacunación</option>
              <option value="odontología">Odontología</option>
              <option value="estética/corte de pelo">
                Estética/Corte de pelo
              </option>
            </select>
            <div class="invalid-feedback" id="servicioError">
              Por favor, seleccione un servicio.
            </div>
          </div>
          <!-- Fecha -->
          <div class="mb-3">
            <label for="fecha" class="form-label">Fecha</label>
            <input type="date" class="form-control" id="fecha" required />
            <div class="invalid-feedback" id="fechaError">
              Por favor, seleccione una fecha.
            </div>
          </div>
          <!-- Hora -->
          <div class="mb-3">
            <label for="hora" class="form-label">Hora</label>
            <select class="form-control" id="hora" required>
              <option value="">Seleccione un horario</option>
              <option value="09:00">09:00 AM</option>
              <option value="10:00">10:00 AM</option>
              <option value="11:00">11:00 AM</option>
              <option value="14:00">02:00 PM</option>
              <option value="15:00">03:00 PM</option>
              <option value="16:00">04:00 PM</option>
              <option value="17:00">05:00 PM</option>
            </select>
            <div class="invalid-feedback" id="horaError">
              Por favor, seleccione una hora.
            </div>
          </div>
          <!-- Tipo de mascota -->
          <div class="mb-3">
            <label for="tipoMascota" class="form-label">Tipo de Mascota</label>
            <select class="form-control" id="tipoMascota" required>
              <option value="">Seleccione una opción</option>
              <option value="perro">Perro</option>
              <option value="gato">Gato</option>
              <option value="otro">Otro</option>
            </select>
            <div class="invalid-feedback" id="tipoMascotaError">
              Por favor, seleccione un tipo de mascota.
            </div>
          </div>
          <!-- Raza de la mascota (opcional) -->
          <div class="mb-3">
            <label for="raza" class="form-label"
              >Raza de la Mascota (opcional)</label
            >
            <input type="text" class="form-control" id="raza" />
          </div>
          <!-- Edad de la mascota (opcional) -->
          <div class="mb-3">
            <label for="edad" class="form-label"
              >Edad de la Mascota (opcional)</label
            >
            <input type="number" class="form-control" id="edad" min="0" />
          </div>
          <!-- Teléfono alternativo (opcional) -->
          <div class="mb-3">
            <label for="telefonoAlternativo" class="form-label"
              >Teléfono Alternativo (opcional)</label
            >
            <input type="tel" class="form-control" id="telefonoAlternativo" />
          </div>

          <!-- Notas adicionales -->
          <div class="mb-3">
            <label for="notas" class="form-label">Notas Adicionales</label>
            <textarea class="form-control" id="notas" rows="3"></textarea>
          </div>

          <!-- Botón de agendar cita -->
          <button type="submit" class="btn btn-primary mt-3">Agendar</button>
        </form>
      </div>
    </section>

    <!-- Modal de Resumen de Cita -->
    <div
      class="modal fade"
      id="resumenModal"
      tabindex="-1"
      aria-labelledby="resumenModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="resumenModalLabel">
              Resumen de la Cita
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p><strong>Servicio:</strong> <span id="resumenServicio"></span></p>
            <p><strong>Fecha:</strong> <span id="resumenFecha"></span></p>
            <p><strong>Hora:</strong> <span id="resumenHora"></span></p>
            <p>
              <strong>Tipo de Mascota:</strong>
              <span id="resumenTipoMascota"></span>
            </p>
            <p><strong>Raza:</strong> <span id="resumenRaza"></span></p>
            <p><strong>Edad:</strong> <span id="resumenEdad"></span></p>
            <p>
              <strong>Teléfono Alternativo:</strong>
              <span id="resumenTelefonoAlternativo"></span>
            </p>
            <p>
              <strong>Notas Adicionales:</strong>
              <span id="resumenNotas"></span>
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="concluirButton">
              Concluir
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.6.4/dist/email.min.js"></script>
    <script>
      (function () {
        emailjs.init("ZVZQ1UkXEcFkb4xGH");
      })();

      document.addEventListener("DOMContentLoaded", function () {
        const citaForm = document.getElementById("citaForm");
        const resumenModal = new bootstrap.Modal(
          document.getElementById("resumenModal")
        );
        const concluirButton = document.getElementById("concluirButton");

        citaForm.addEventListener("submit", function (e) {
          e.preventDefault();

          // Validar el formulario
          if (!citaForm.checkValidity()) {
            e.stopPropagation();
            citaForm.classList.add("was-validated");
            return;
          }

          // Obtener los valores del formulario
          const servicio = document.getElementById("servicio").value;
          const fecha = document.getElementById("fecha").value;
          const hora = document.getElementById("hora").value;
          const tipoMascota = document.getElementById("tipoMascota").value;
          const raza = document.getElementById("raza").value || "N/A";
          const edad = document.getElementById("edad").value || "N/A";
          const telefonoAlternativo =
            document.getElementById("telefonoAlternativo").value || "N/A";
          const notas = document.getElementById("notas").value || "N/A";

          // Mostrar los valores en el modal de resumen
          document.getElementById("resumenServicio").textContent = servicio;
          document.getElementById("resumenFecha").textContent = fecha;
          document.getElementById("resumenHora").textContent = hora;
          document.getElementById("resumenTipoMascota").textContent =
            tipoMascota;
          document.getElementById("resumenRaza").textContent = raza;
          document.getElementById("resumenEdad").textContent = edad;
          document.getElementById("resumenTelefonoAlternativo").textContent =
            telefonoAlternativo;
          document.getElementById("resumenNotas").textContent = notas;

          // Mostrar el modal de resumen
          resumenModal.show();
        });

        concluirButton.addEventListener("click", function () {
          // Obtener los valores del resumen
          const servicio =
            document.getElementById("resumenServicio").textContent;
          const fecha = document.getElementById("resumenFecha").textContent;
          const hora = document.getElementById("resumenHora").textContent;
          const tipoMascota =
            document.getElementById("resumenTipoMascota").textContent;
          const raza = document.getElementById("resumenRaza").textContent;
          const edad = document.getElementById("resumenEdad").textContent;
          const telefonoAlternativo = document.getElementById(
            "resumenTelefonoAlternativo"
          ).textContent;
          const notas = document.getElementById("resumenNotas").textContent;

          // Enviar el correo usando EmailJS
          emailjs
            .send("service_mkzisug", "template_m0v6yw7", {
              servicio: servicio,
              fecha: fecha,
              hora: hora,
              tipoMascota: tipoMascota,
              raza: raza,
              edad: edad,
              telefonoAlternativo: telefonoAlternativo,
              notas: notas,
            })
            .then(
              function (response) {
                console.log("SUCCESS!", response.status, response.text);
              },
              function (error) {
                console.log("FAILED...", error);
              }
            );

          // Redirigir al formulario de citas
          resumenModal.hide();
          citaForm.reset();
          citaForm.classList.remove("was-validated");
        });
      });
    </script>
    <script type="text/javascript"
    src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  
  <script type="text/javascript">
    emailjs.init('ZVZQ1UkXEcFkb4xGH')
  </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
